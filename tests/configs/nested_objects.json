{
    "complex_service": {
        "$reference": {
            "registry": {"id": "complex_service"}
        },
        "database": {
            "$reference": {
                "registry": {"id": "database_service"},
                "instance": "nested_db"
            },
            "host": "nested.example.com",
            "port": 5432,
            "database_name": "nested_db"
        },
        "user_service": {
            "$reference": {
                "registry": {"id": "user_service"}
            },
            "database": "$nested_db",
            "cache_enabled": false
        },
        "config": {
            "environment": "test",
            "debug": "true"
        }
    }
}